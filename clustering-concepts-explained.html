<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitCury Clustering & Grouping Concepts Explained</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            margin-top: 20px;
            margin-bottom: 20px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            margin: -20px -20px 40px -20px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #667eea;
        }

        .toc h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .toc ul {
            list-style: none;
        }

        .toc ul li {
            margin: 8px 0;
        }

        .toc ul li a {
            color: #555;
            text-decoration: none;
            transition: color 0.3s;
        }

        .toc ul li a:hover {
            color: #667eea;
        }

        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: #fafafa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }

        .section h3 {
            color: #555;
            margin: 20px 0 15px 0;
            font-size: 1.4em;
        }

        .section h4 {
            color: #666;
            margin: 15px 0 10px 0;
            font-size: 1.2em;
        }

        .algorithm-card {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #28a745;
        }

        .algorithm-card h4 {
            color: #28a745;
            margin-bottom: 10px;
        }

        .similarity-card {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #fd7e14;
        }

        .similarity-card h4 {
            color: #fd7e14;
            margin-bottom: 10px;
        }

        .implementation-card {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #6f42c1;
        }

        .implementation-card h4 {
            color: #6f42c1;
            margin-bottom: 10px;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            border-radius: 4px;
            margin: 15px 0;
        }

        .note {
            background: #d1ecf1;
            color: #0c5460;
            padding: 15px;
            border-left: 4px solid #17a2b8;
            border-radius: 4px;
            margin: 15px 0;
        }

        .warning {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-left: 4px solid #dc3545;
            border-radius: 4px;
            margin: 15px 0;
        }

        .flowchart {
            text-align: center;
            margin: 20px 0;
        }

        .flowchart-box {
            display: inline-block;
            padding: 10px 20px;
            margin: 5px;
            background: #667eea;
            color: white;
            border-radius: 6px;
            font-weight: bold;
        }

        .arrow {
            font-size: 1.5em;
            color: #667eea;
            margin: 0 10px;
        }

        .diagram-container {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .architecture-diagram {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .layer-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            min-width: 200px;
            position: relative;
        }

        .layer-number {
            position: absolute;
            top: -10px;
            left: -10px;
            background: #dc3545;
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: bold;
        }

        .method-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .method-card {
            background: white;
            border: 2px solid #28a745;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s;
        }

        .method-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .similarity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .similarity-method {
            background: #f8f9fa;
            border: 2px solid #fd7e14;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .process-flow {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 20px 0;
        }

        .process-step {
            background: #28a745;
            color: white;
            padding: 10px 15px;
            border-radius: 6px;
            min-width: 120px;
            font-size: 0.9em;
        }

        .decision-diamond {
            background: #ffc107;
            color: #212529;
            padding: 10px;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            text-align: center;
            transform: rotate(45deg);
        }

        .decision-text {
            transform: rotate(-45deg);
        }

        .uml-diagram {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .class-box {
            border: 2px solid #6f42c1;
            border-radius: 4px;
            margin: 10px;
            display: inline-block;
            vertical-align: top;
            background: white;
        }

        .class-header {
            background: #6f42c1;
            color: white;
            padding: 8px;
            text-align: center;
            font-weight: bold;
        }

        .class-content {
            padding: 10px;
            text-align: left;
        }

        .visual-flow {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .flow-row {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .metrics-visualization {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .metric-box {
            background: white;
            border: 2px solid #17a2b8;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #17a2b8;
            display: block;
        }

        .performance-chart {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .chart-bar {
            height: 20px;
            margin: 5px 0;
            border-radius: 4px;
            position: relative;
            background: #e9ecef;
        }

        .bar-fill {
            height: 100%;
            border-radius: 4px;
            position: relative;
        }

        .speed-bar { background: #28a745; width: 90%; }
        .quality-bar { background: #fd7e14; width: 70%; }
        .memory-bar { background: #6f42c1; width: 85%; }
        .accuracy-bar { background: #dc3545; width: 95%; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }

        tr:hover {
            background: #f5f5f5;
        }

        .metric-badge {
            display: inline-block;
            padding: 4px 8px;
            background: #28a745;
            color: white;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }

        .complexity-indicator {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .complexity-low { background: #28a745; width: 30%; }
        .complexity-medium { background: #ffc107; width: 60%; }
        .complexity-high { background: #dc3545; width: 90%; }

        /* Enhanced Visual Diagram Styles */
        .flowchart {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin: 30px 0;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 30px;
            border-radius: 12px;
            border: 2px solid #dee2e6;
        }

        .flowchart-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            min-width: 180px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .flowchart-box:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .flowchart-box.start {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .flowchart-box.algorithm {
            background: linear-gradient(135deg, #fd7e14 0%, #ffc107 100%);
            color: #212529;
        }

        .flowchart-box.result {
            background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);
        }

        .flowchart-arrow {
            font-size: 2em;
            color: #667eea;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .flowchart-diamond {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
            color: #212529;
            padding: 20px;
            transform: rotate(45deg);
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-weight: bold;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3);
        }

        .flowchart-diamond span {
            transform: rotate(-45deg);
            font-size: 0.9em;
        }

        .flowchart-branches {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .branch {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .flowchart-arrow.left { transform: rotate(-90deg); }
        .flowchart-arrow.right { transform: rotate(90deg); }
        .flowchart-arrow.down { /* default */ }

        .layer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .layer {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease;
            text-align: center;
        }

        .layer:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .layer h5 {
            font-size: 1.3em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .layer-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }

        .stat {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.85em;
            backdrop-filter: blur(10px);
        }

        .principles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .principle-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .principle-card:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .principle-icon {
            font-size: 3em;
            margin-bottom: 15px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.1));
        }

        .principle-card h5 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .uml-container {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
        }

        .visual-flow {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin: 30px 0;
        }

        .algorithm-visual {
            background: white;
            border: 3px solid #28a745;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.15);
            transition: all 0.3s ease;
        }

        .algorithm-visual:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(40, 167, 69, 0.25);
        }

        .algorithm-visual h4 {
            color: #28a745;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .algorithm-icon {
            font-size: 1.5em;
        }

        .similarity-visual {
            background: white;
            border: 3px solid #fd7e14;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 6px 20px rgba(253, 126, 20, 0.15);
            transition: all 0.3s ease;
        }

        .similarity-visual:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(253, 126, 20, 0.25);
        }

        .similarity-visual h4 {
            color: #fd7e14;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .formula-box {
            background: linear-gradient(135deg, #e9ecef 0%, #f8f9fa 100%);
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            text-align: center;
            font-weight: bold;
        }

        .advantage-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .advantage-item {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.2);
        }

        .complexity-visual {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #6c757d;
        }

        .complexity-badge {
            padding: 8px 15px;
            border-radius: 20px;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
        }

        .complexity-badge.low { background: #28a745; }
        .complexity-badge.medium { background: #ffc107; color: #212529; }
        .complexity-badge.high { background: #dc3545; }

        /* Multi-layer Visual Styles */
        .visual-diagram {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid #dee2e6;
            border-radius: 15px;
            padding: 30px;
            margin: 25px 0;
        }

        .flowchart-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .flowchart-step {
            display: flex;
            align-items: center;
            gap: 20px;
            background: white;
            padding: 20px 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            min-width: 300px;
            transition: transform 0.3s ease;
        }

        .flowchart-step:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .step-icon {
            font-size: 2.5em;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.1));
        }

        .step-content h4 {
            color: #667eea;
            margin: 0 0 8px 0;
            font-size: 1.3em;
        }

        .step-content p {
            color: #666;
            margin: 0;
            font-size: 1em;
        }

        .fallback-flow {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .fallback-step {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            min-width: 350px;
            text-align: center;
            position: relative;
            transition: all 0.3s ease;
        }

        .fallback-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .fallback-step.primary {
            border: 3px solid #28a745;
        }

        .fallback-step.secondary {
            border: 3px solid #ffc107;
        }

        .fallback-step.tertiary {
            border: 3px solid #dc3545;
        }

        .fallback-step h4 {
            margin: 0 0 10px 0;
            font-size: 1.4em;
        }

        .fallback-step p {
            margin: 0 0 15px 0;
            color: #666;
        }

        .accuracy-badge {
            display: inline-block;
            padding: 8px 15px;
            border-radius: 20px;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
        }

        .accuracy-badge.high {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .accuracy-badge.medium {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
            color: #212529;
        }

        .accuracy-badge.low {
            background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);
        }

        .fallback-arrow {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            font-size: 2em;
            color: #667eea;
            font-weight: bold;
        }

        .fallback-arrow span {
            font-size: 0.5em;
            color: #666;
            font-weight: normal;
            font-style: italic;
        }

        .clustering-modes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 20px 0;
        }

        .mode-card {
            background: white;
            border: 3px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .mode-card:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .mode-icon {
            font-size: 3em;
            margin-bottom: 15px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.1));
        }

        .mode-card h5 {
            color: #667eea;
            margin: 0 0 15px 0;
            font-size: 1.3em;
        }

        .mode-card p {
            color: #666;
            margin: 0 0 20px 0;
        }

        .mode-features {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .feature {
            background: linear-gradient(135deg, #e9ecef 0%, #f8f9fa 100%);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            color: #555;
        }

        .performance-matrix {
            display: grid;
            grid-template-columns: 120px repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .matrix-row {
            display: contents;
        }

        .matrix-label {
            display: flex;
            align-items: center;
            font-weight: bold;
            color: #667eea;
            font-size: 1.1em;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .matrix-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .matrix-cell:hover {
            transform: scale(1.05);
        }

        .matrix-cell.high {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .matrix-cell.medium {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
            color: #212529;
        }

        .matrix-cell.low {
            background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);
            color: white;
        }

        /* Performance Section Styles */
        .cache-flow {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .cache-step {
            background: white;
            border: 3px solid #dee2e6;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            min-width: 150px;
            transition: all 0.3s ease;
        }

        .cache-step:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .cache-step.decision {
            border-color: #ffc107;
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
        }

        .cache-step.success {
            border-color: #28a745;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        }

        .cache-step.process {
            border-color: #fd7e14;
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
        }

        .cache-step.store {
            border-color: #6f42c1;
            background: linear-gradient(135deg, #e2d9f3 0%, #d6c8e8 100%);
        }

        .cache-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .cache-step h4 {
            margin: 0 0 8px 0;
            color: #333;
        }

        .cache-step p {
            margin: 0 0 10px 0;
            color: #666;
            font-size: 0.9em;
        }

        .cache-branches {
            display: flex;
            gap: 40px;
            margin: 20px 0;
        }

        .cache-branch {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .performance-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            color: white;
            font-size: 0.8em;
            font-weight: bold;
        }

        .performance-badge.fast {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .performance-badge.slow {
            background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);
        }

        .performance-badge.quality {
            background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);
        }

        .metrics-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .metric-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .metric-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.1));
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .metric-label {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .metric-bar {
            background: #e9ecef;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }

        .metric-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .rate-limit-flow {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 20px 0;
        }

        .rate-limit-step {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
        }

        .rate-limit-step h4 {
            color: #667eea;
            margin: 0 0 15px 0;
        }

        .queue-visualization {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
        }

        .queue-item {
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .queue-item.active {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .queue-item.waiting {
            background: #e9ecef;
            color: #666;
        }

        .delay-visualization {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 15px 0;
        }

        .delay-bar {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .delay-bar span {
            min-width: 60px;
            font-size: 0.9em;
            font-weight: bold;
            color: #666;
        }

        .delay-fill {
            height: 6px;
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
            border-radius: 3px;
            flex: 1;
            transition: width 0.3s ease;
        }

        .sampling-flow {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .sampling-step {
            background: white;
            border: 3px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            min-width: 300px;
            transition: all 0.3s ease;
        }

        .sampling-step:hover {
            transform: translateY(-3px);
            border-color: #667eea;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .file-grid {
            display: flex;
            gap: 5px;
            justify-content: center;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .file-item {
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            color: #666;
        }

        .sample-categories {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .sample-cat {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.9em;
        }

        .optimization-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .optimization-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .optimization-card:hover {
            transform: translateY(-3px);
            border-color: #28a745;
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.15);
        }

        .opt-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.1));
        }

        .optimization-card h5 {
            color: #28a745;
            margin: 0 0 10px 0;
            font-size: 1.2em;
        }

        .optimization-card p {
            color: #666;
            margin: 0;
            font-size: 0.9em;
        }

        /* Evaluation Metrics Styles */
        .metrics-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .metric-category {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }

        .metric-category h4 {
            color: #667eea;
            margin: 0 0 20px 0;
            text-align: center;
            font-size: 1.3em;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .metric-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-3px);
            border-color: #667eea;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .metric-card.silhouette {
            border-color: #28a745;
        }

        .metric-card.wcss {
            border-color: #fd7e14;
        }

        .metric-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            text-align: center;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.1));
        }

        .metric-card h5 {
            color: #333;
            margin: 0 0 15px 0;
            text-align: center;
            font-size: 1.2em;
        }

        .range-bar {
            display: flex;
            border-radius: 8px;
            overflow: hidden;
            margin: 15px 0;
            border: 2px solid #e9ecef;
        }

        .range-section {
            padding: 10px;
            color: white;
            font-weight: bold;
            text-align: center;
            font-size: 0.85em;
            flex: 1;
        }

        .range-section.excellent {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .range-section.good {
            background: linear-gradient(135deg, #17a2b8 0%, #6f42c1 100%);
        }

        .range-section.fair {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
            color: #212529;
        }

        .range-section.poor {
            background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);
        }

        .wcss-visual {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
        }

        .cluster-visual {
            position: relative;
            width: 200px;
            height: 150px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #dee2e6;
        }

        .cluster-point {
            position: absolute;
            font-size: 1.5em;
            font-weight: bold;
            color: #6c757d;
        }

        .cluster-point.centroid {
            font-size: 2em;
            color: #dc3545;
            z-index: 2;
        }

        .distance-line {
            position: absolute;
            width: 80px;
            height: 2px;
            background: linear-gradient(90deg, #dc3545, #6c757d);
            transform: rotate(45deg);
            top: 50%;
            left: 50%;
            transform-origin: center;
        }

        .formula-box {
            background: linear-gradient(135deg, #e9ecef 0%, #f8f9fa 100%);
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            font-weight: bold;
        }

        .confidence-breakdown {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .confidence-component {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #e9ecef;
        }

        .component-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .component-icon {
            font-size: 1.3em;
        }

        .component-name {
            font-weight: bold;
            color: #333;
            flex: 1;
            margin-left: 10px;
        }

        .component-weight {
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: bold;
        }

        .confidence-bar {
            height: 12px;
            background: #e9ecef;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        .confidence-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 0.5s ease;
        }

        .confidence-component p {
            margin: 0;
            color: #666;
            font-size: 0.9em;
        }

        .evaluation-flow {
            margin: 30px 0;
        }

        .process-steps {
            display: flex;
            align-items: center;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .eval-step {
            background: white;
            border: 3px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            min-width: 160px;
            transition: all 0.3s ease;
            position: relative;
        }

        .eval-step:hover {
            transform: translateY(-3px);
            border-color: #667eea;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .step-number {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: #667eea;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1em;
        }

        .eval-step h4 {
            color: #667eea;
            margin: 10px 0 8px 0;
            font-size: 1.1em;
        }

        .eval-step p {
            color: #666;
            margin: 0;
            font-size: 0.9em;
        }

        .thresholds-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .threshold-card {
            background: white;
            border: 3px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .threshold-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .threshold-card.excellent {
            border-color: #28a745;
        }

        .threshold-card.good {
            border-color: #17a2b8;
        }

        .threshold-card.acceptable {
            border-color: #ffc107;
        }

        .threshold-icon {
            font-size: 3em;
            margin-bottom: 15px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.1));
        }

        .threshold-card h5 {
            margin: 0 0 15px 0;
            font-size: 1.2em;
        }

        .threshold-card.excellent h5 {
            color: #28a745;
        }

        .threshold-card.good h5 {
            color: #17a2b8;
        }

        .threshold-card.acceptable h5 {
            color: #e67e22;
        }

        .threshold-criteria {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .criterion {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            color: #555;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .metrics-dashboard {
                grid-template-columns: 1fr;
            }

            .process-steps {
                flex-direction: column;
                gap: 15px;
            }

            .thresholds-grid {
                grid-template-columns: 1fr;
            }

            .eval-step {
                min-width: auto;
            }
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .code-block {
                font-size: 0.8em;
            }

            .layer-container {
                grid-template-columns: 1fr;
            }

            .principles-grid {
                grid-template-columns: 1fr;
            }

            .flowchart-branches {
                flex-direction: column;
            }

            .clustering-modes {
                grid-template-columns: 1fr;
            }

            .performance-matrix {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .matrix-cell {
                padding: 10px;
                font-size: 0.9em;
            }

            .flowchart-step {
                min-width: auto;
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }

            .fallback-step {
                min-width: auto;
                padding: 20px;
            }

            .cache-branches {
                flex-direction: column;
                gap: 20px;
            }

            .metrics-dashboard {
                grid-template-columns: 1fr;
            }

            .rate-limit-flow {
                grid-template-columns: 1fr;
            }

            .sampling-step {
                min-width: auto;
            }

            .sample-categories {
                grid-template-columns: 1fr;
            }

            .optimization-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Threshold Table Styles */
        .threshold-table {
            display: grid;
            grid-template-columns: 200px 1fr 1fr 1fr;
            gap: 1px;
            background: #e9ecef;
            border-radius: 8px;
            overflow: hidden;
            margin: 20px 0;
        }

        .table-header {
            display: contents;
        }

        .header-cell {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            padding: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 14px;
        }

        .table-row {
            display: contents;
        }

        .table-row:nth-child(even) .method-cell,
        .table-row:nth-child(even) .threshold-cell,
        .table-row:nth-child(even) .range-cell {
            background: #f8f9fa;
        }

        .table-row:nth-child(odd) .method-cell,
        .table-row:nth-child(odd) .threshold-cell,
        .table-row:nth-child(odd) .range-cell {
            background: white;
        }

        .method-cell {
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }

        .method-icon {
            font-size: 20px;
        }

        .threshold-cell {
            padding: 15px;
            text-align: center;
        }

        .threshold-bar {
            position: relative;
            background: #e9ecef;
            height: 25px;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .threshold-fill {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            border-radius: 12px;
            transition: width 0.3s ease;
        }

        .threshold-bar span {
            position: relative;
            z-index: 2;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .range-cell {
            padding: 15px;
            text-align: center;
            font-family: 'Courier New', monospace;
            background-color: #f8f9fa;
            font-weight: 600;
        }

        /* Additional responsive design for threshold table */
        @media (max-width: 768px) {
            .threshold-table {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .table-header {
                display: none;
            }

            .table-row {
                display: grid;
                grid-template-columns: 1fr;
                gap: 10px;
                margin-bottom: 20px;
                border: 1px solid #dee2e6;
                border-radius: 8px;
                padding: 15px;
                background: white;
            }

            .method-cell::before {
                content: "Method: ";
                font-weight: bold;
                color: #007bff;
            }

            .threshold-cell::before {
                content: "Threshold: ";
                font-weight: bold;
                color: #007bff;
                display: block;
                margin-bottom: 5px;
            }

            .range-cell::before {
                content: "Range: ";
                font-weight: bold;
                color: #007bff;
            }
        }

        /* Code block improvements for implementation section */
        .code-block {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Courier New', Monaco, monospace;
            font-size: 14px;
            line-height: 1.5;
            overflow-x: auto;
            position: relative;
        }

        .code-block::before {
            content: "💻 Code";
            position: absolute;
            top: -10px;
            left: 15px;
            background: #007bff;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-family: 'Segoe UI', sans-serif;
        }

        /* Enhanced implementation card styling */
        .implementation-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .implementation-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
        }

        .implementation-card h4 {
            color: #007bff;
            margin-bottom: 15px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .implementation-card h4::before {
            content: "⚙️";
            font-size: 20px;
        }

        /* Best practices styling */
        .highlight {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .highlight h4 {
            color: white;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .highlight ul {
            list-style: none;
            padding: 0;
        }

        .highlight li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .highlight li::before {
            content: "✅";
            position: absolute;
            left: 0;
            top: 8px;
        }

        /* Note styling improvements */
        .note {
            background: linear-gradient(135deg, #ffc107, #fd7e14);
            color: #212529;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 5px solid #fd7e14;
            position: relative;
        }

        .note::before {
            content: "💡";
            position: absolute;
            top: -10px;
            left: 15px;
            background: #fd7e14;
            color: white;
            padding: 5px 10px;
            border-radius: 50%;
            font-size: 16px;
        }

        .note strong {
            color: #495057;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>GitCury Clustering & Grouping Concepts</h1>
            <p>A Comprehensive Guide to Advanced File Clustering Algorithms</p>
        </div>

        <div class="toc">
            <h3>Table of Contents</h3>
            <ul>
                <li><a href="#overview">1. Overview & Architecture</a></li>
                <li><a href="#algorithms">2. Clustering Algorithms</a></li>
                <li><a href="#similarity">3. Similarity Measures</a></li>
                <li><a href="#multilayer">4. Multi-Layer Approach</a></li>
                <li><a href="#performance">5. Performance & Optimization</a></li>
                <li><a href="#evaluation">6. Evaluation Metrics</a></li>
                <li><a href="#configuration">7. Configuration & Tuning</a></li>
                <li><a href="#implementation">8. Implementation Details</a></li>
            </ul>
        </div>

        <section id="overview" class="section">
            <h2>1. Overview & Architecture</h2>
            
            <div class="highlight">
                <h3>GitCury's Multi-Layer Clustering System</h3>
                <p>GitCury implements a sophisticated clustering system that operates at multiple levels to intelligently group files for commit organization. The system employs various algorithms and similarity measures to create meaningful, contextually relevant file groupings.</p>
            </div>

            <div class="uml-container">
                <h4>🏗️ System Architecture Flow</h4>
                <div class="flowchart">
                    <div class="flowchart-box start">📁 Input Files</div>
                    <div class="flowchart-arrow">↓</div>
                    <div class="flowchart-box">🔍 File Analysis</div>
                    <div class="flowchart-arrow">↓</div>
                    <div class="flowchart-diamond"><span>Choose Algorithm?</span></div>
                    <div class="flowchart-branches">
                        <div class="branch">
                            <div class="flowchart-arrow left">←</div>
                            <div class="flowchart-box algorithm">📂 Directory</div>
                        </div>
                        <div class="branch">
                            <div class="flowchart-arrow down">↓</div>
                            <div class="flowchart-box algorithm">🔤 Pattern</div>
                        </div>
                        <div class="branch">
                            <div class="flowchart-arrow right">→</div>
                            <div class="flowchart-box algorithm">🧠 Semantic</div>
                        </div>
                    </div>
                    <div class="flowchart-arrow">↓</div>
                    <div class="flowchart-box">📊 Similarity Analysis</div>
                    <div class="flowchart-arrow">↓</div>
                    <div class="flowchart-box result">📋 Clustered Groups</div>
                </div>
            </div>

            <div class="layer-container">
                <div class="layer" style="background: linear-gradient(45deg, #ff6b6b, #feca57);">
                    <h5>🔍 Analysis Layer</h5>
                    <p>File size, type, content analysis</p>
                    <div class="layer-stats">
                        <span class="stat">Performance: ⚡ Fast</span>
                        <span class="stat">Accuracy: 📊 High</span>
                    </div>
                </div>
                <div class="layer" style="background: linear-gradient(45deg, #48dbfb, #0abde3);">
                    <h5>🤖 Algorithm Layer</h5>
                    <p>Smart algorithm selection</p>
                    <div class="layer-stats">
                        <span class="stat">Adaptive: 🔄 Yes</span>
                        <span class="stat">Methods: 🔢 5</span>
                    </div>
                </div>
                <div class="layer" style="background: linear-gradient(45deg, #ff9ff3, #f368e0);">
                    <h5>📏 Similarity Layer</h5>
                    <p>Multiple distance metrics</p>
                    <div class="layer-stats">
                        <span class="stat">Metrics: 📐 4</span>
                        <span class="stat">Precision: 🎯 High</span>
                    </div>
                </div>
                <div class="layer" style="background: linear-gradient(45deg, #54a0ff, #2e86de);">
                    <h5>📦 Output Layer</h5>
                    <p>Optimized file groupings</p>
                    <div class="layer-stats">
                        <span class="stat">Quality: ⭐ Excellent</span>
                        <span class="stat">Speed: 🚀 Optimized</span>
                    </div>
                </div>
            </div>

            <div class="note">
                <h4>🎯 Core Principles</h4>
                <div class="principles-grid">
                    <div class="principle-card">
                        <div class="principle-icon">🔄</div>
                        <h5>Multi-Algorithm</h5>
                        <p>5 different clustering methods for diverse scenarios</p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-icon">🧠</div>
                        <h5>Adaptive Selection</h5>
                        <p>AI-driven algorithm choice based on data characteristics</p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-icon">⚡</div>
                        <h5>Performance Optimized</h5>
                        <p>Smart sampling and caching for lightning-fast results</p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-icon">⚙️</div>
                        <h5>Highly Configurable</h5>
                        <p>Extensive customization for any use case</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="algorithms" class="section">
            <h2>2. Clustering Algorithms</h2>

            <div class="algorithm-visual">
                <h4><span class="algorithm-icon">📂</span>Directory-Based Clustering</h4>
                <p><strong>Principle:</strong> Groups files based on their directory structure and hierarchical relationships.</p>
                
                <div class="visual-flow">
                    <div class="flowchart">
                        <div class="flowchart-box start">📁 Input Files</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">📝 Extract Relative Paths</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">📂 Group by Directory</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box result">📋 Directory-Based Groups</div>
                    </div>
                </div>

                <div class="advantage-list">
                    <div class="advantage-item">⚡ Fast Execution</div>
                    <div class="advantage-item">🏗️ Respects Structure</div>
                    <div class="advantage-item">🎯 Intuitive Results</div>
                </div>

                <div class="complexity-visual">
                    <div class="complexity-badge low">Low Complexity</div>
                    <span>O(n) - Linear time complexity</span>
                </div>
            </div>

            <div class="algorithm-visual">
                <h4><span class="algorithm-icon">🔤</span>Pattern-Based Clustering</h4>
                <p><strong>Principle:</strong> Analyzes file patterns, extensions, and naming conventions to identify relationships.</p>
                
                <div class="visual-flow">
                    <div class="flowchart">
                        <div class="flowchart-box start">📁 Input Files</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-diamond"><span>Pattern Type?</span></div>
                        <div class="flowchart-branches">
                            <div class="branch">
                                <div class="flowchart-arrow left">←</div>
                                <div class="flowchart-box algorithm">🧪 Test-Impl</div>
                            </div>
                            <div class="branch">
                                <div class="flowchart-arrow down">↓</div>
                                <div class="flowchart-box algorithm">📄 Extension</div>
                            </div>
                            <div class="branch">
                                <div class="flowchart-arrow right">→</div>
                                <div class="flowchart-box algorithm">🔗 Naming</div>
                            </div>
                        </div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box result">📋 Pattern Groups</div>
                    </div>
                </div>

                <div class="advantage-list">
                    <div class="advantage-item">🧪 Test-Implementation Pairing</div>
                    <div class="advantage-item">📄 Extension-Based Grouping</div>
                    <div class="advantage-item">🔗 Related File Recognition</div>
                </div>

                <div class="complexity-visual">
                    <div class="complexity-badge medium">Medium Complexity</div>
                    <span>O(n log n) - Efficient sorting and grouping</span>
                </div>
            </div>

            <div class="algorithm-visual">
                <h4><span class="algorithm-icon">🧠</span>Semantic Clustering (ML-Based)</h4>
                <p><strong>Principle:</strong> Uses machine learning embeddings to understand semantic relationships between files.</p>
                
                <div class="visual-flow">
                    <div class="flowchart">
                        <div class="flowchart-box start">📁 Input Files</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">📊 Generate Embeddings</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-diamond"><span>Clustering Method?</span></div>
                        <div class="flowchart-branches">
                            <div class="branch">
                                <div class="flowchart-arrow left">←</div>
                                <div class="flowchart-box algorithm">📊 K-Means</div>
                            </div>
                            <div class="branch">
                                <div class="flowchart-arrow right">→</div>
                                <div class="flowchart-box algorithm">🌳 Hierarchical</div>
                            </div>
                        </div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box result">🧠 Semantic Groups</div>
                    </div>
                </div>

                <div class="advantage-list">
                    <div class="advantage-item">🤖 AI-Powered Analysis</div>
                    <div class="advantage-item">📊 K-means & Hierarchical</div>
                    <div class="advantage-item">🎯 Adaptive Selection</div>
                    <div class="advantage-item">📏 Threshold-Based</div>
                </div>

                <div class="complexity-visual">
                    <div class="complexity-badge high">High Complexity</div>
                    <span>O(n²) to O(n³) - Advanced ML algorithms</span>
                </div>
            </div>

            <div class="algorithm-visual">
                <h4><span class="algorithm-icon">🌳</span>Hierarchical Clustering</h4>
                <p><strong>Principle:</strong> Builds a hierarchy of clusters using bottom-up approach with single linkage.</p>
                
                <div class="visual-flow">
                    <div class="flowchart">
                        <div class="flowchart-box start">🔢 Individual Points</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">📏 Calculate Distances</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">🔄 Merge Closest Clusters</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-diamond"><span>Stop Condition?</span></div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box result">🌳 Hierarchical Groups</div>
                    </div>
                </div>

                <div class="advantage-list">
                    <div class="advantage-item">🔗 Single Linkage</div>
                    <div class="advantage-item">📏 Threshold-Based Stopping</div>
                    <div class="advantage-item">🔢 Auto Cluster Count</div>
                </div>

                <div class="complexity-visual">
                    <div class="complexity-badge medium">Medium-High Complexity</div>
                    <span>O(n²) - Distance matrix computation</span>
                </div>
            </div>

            <div class="algorithm-visual">
                <h4><span class="algorithm-icon">⚡</span>Smart Sampling Clustering</h4>
                <p><strong>Principle:</strong> For large datasets, selects representative files and clusters them, then assigns remaining files.</p>
                
                <div class="visual-flow">
                    <div class="flowchart">
                        <div class="flowchart-box start">📁 Large File Set</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">🎯 Select Representatives</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">🧠 Cluster Representatives</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">📎 Assign Remaining Files</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box result">⚡ Optimized Groups</div>
                    </div>
                </div>

                <div class="advantage-list">
                    <div class="advantage-item">🚀 Reduces API Calls</div>
                    <div class="advantage-item">⭐ Maintains Quality</div>
                    <div class="advantage-item">🎯 Diverse Selection</div>
                </div>

                <div class="complexity-visual">
                    <div class="complexity-badge medium">Optimized Complexity</div>
                    <span>O(k*n) where k &lt;&lt; n - Sampling optimization</span>
                </div>
            </div>
        </section>

        <section id="similarity" class="section">
            <h2>3. Similarity Measures</h2>

            <div class="similarity-visual">
                <h4><span class="algorithm-icon">📐</span>Cosine Similarity</h4>
                <p><strong>Principle:</strong> Measures the angular similarity between two vectors, ideal for high-dimensional embeddings.</p>
                
                <div class="formula-box">
                    cos(θ) = (A·B) / (||A|| ||B||)
                </div>

                <div class="visual-flow">
                    <div class="flowchart">
                        <div class="flowchart-box start">📊 Vector A & B</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">🔢 Calculate Dot Product</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">📏 Calculate Magnitudes</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box result">📐 Angular Similarity</div>
                    </div>
                </div>

                <div class="advantage-list">
                    <div class="advantage-item" style="background: linear-gradient(135deg, #fd7e14 0%, #ffc107 100%);">🧠 Semantic Similarity</div>
                    <div class="advantage-item" style="background: linear-gradient(135deg, #fd7e14 0%, #ffc107 100%);">📊 High-Dimensional</div>
                    <div class="advantage-item" style="background: linear-gradient(135deg, #fd7e14 0%, #ffc107 100%);">🎯 Range [0, 1]</div>
                </div>

                <div class="metric-badge" style="background: #fd7e14;">Type: Angular</div>
                <div class="metric-badge" style="background: #28a745;">Best For: ML Embeddings</div>
            </div>

            <div class="similarity-visual">
                <h4><span class="algorithm-icon">🔗</span>Jaccard Similarity</h4>
                <p><strong>Principle:</strong> Measures similarity between finite sets, perfect for binary features and structural comparisons.</p>
                
                <div class="formula-box">
                    J(A,B) = |A ∩ B| / |A ∪ B|
                </div>

                <div class="visual-flow">
                    <div class="flowchart">
                        <div class="flowchart-box start">📊 Vector A & B</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">🔄 Convert to Binary Sets</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">🔗 Find Intersection & Union</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box result">🎯 Set Similarity</div>
                    </div>
                </div>

                <div class="advantage-list">
                    <div class="advantage-item" style="background: linear-gradient(135deg, #17a2b8 0%, #20c997 100%);">🔲 Binary Features</div>
                    <div class="advantage-item" style="background: linear-gradient(135deg, #17a2b8 0%, #20c997 100%);">🏗️ Structural Similarity</div>
                    <div class="advantage-item" style="background: linear-gradient(135deg, #17a2b8 0%, #20c997 100%);">🎯 Range [0, 1]</div>
                </div>

                <div class="metric-badge" style="background: #17a2b8;">Type: Set-based</div>
                <div class="metric-badge" style="background: #28a745;">Best For: Patterns</div>
            </div>

            <div class="similarity-visual">
                <h4><span class="algorithm-icon">📏</span>Manhattan Similarity</h4>
                <p><strong>Principle:</strong> L1 distance converted to similarity using exponential decay, sensitive to feature differences.</p>
                
                <div class="formula-box">
                    similarity = exp(-distance / maxDistance)
                </div>

                <div class="visual-flow">
                    <div class="flowchart">
                        <div class="flowchart-box start">📊 Vector A & B</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">📏 Calculate L1 Distance</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">📈 Apply Exponential Decay</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box result">📏 Distance Similarity</div>
                    </div>
                </div>

                <div class="advantage-list">
                    <div class="advantage-item" style="background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);">⚠️ Outlier Sensitive</div>
                    <div class="advantage-item" style="background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);">📊 Feature Differences</div>
                    <div class="advantage-item" style="background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);">🎯 Range [0, 1]</div>
                </div>

                <div class="metric-badge" style="background: #6f42c1;">Type: Distance-based</div>
                <div class="metric-badge" style="background: #28a745;">Best For: Numerical Data</div>
            </div>

            <div class="similarity-visual">
                <h4><span class="algorithm-icon">🎭</span>Hybrid Similarity</h4>
                <p><strong>Principle:</strong> Ensemble method combining multiple similarity measures with dynamic confidence weighting.</p>
                
                <div class="formula-box">
                    Weighted Average with Confidence Adjustment
                </div>

                <div class="visual-flow">
                    <div class="flowchart">
                        <div class="flowchart-box start">📊 Input Vectors</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-branches">
                            <div class="branch">
                                <div class="flowchart-box algorithm">📐 Cosine</div>
                            </div>
                            <div class="branch">
                                <div class="flowchart-box algorithm">🔗 Jaccard</div>
                            </div>
                            <div class="branch">
                                <div class="flowchart-box algorithm">📏 Manhattan</div>
                            </div>
                        </div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box">⚖️ Confidence Weighting</div>
                        <div class="flowchart-arrow">↓</div>
                        <div class="flowchart-box result">🎭 Ensemble Similarity</div>
                    </div>
                </div>

                <div class="advantage-list">
                    <div class="advantage-item" style="background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);">🎯 Dynamic Weighting</div>
                    <div class="advantage-item" style="background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);">🔄 Multiple Methods</div>
                    <div class="advantage-item" style="background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);">📊 Adaptive Thresholds</div>
                </div>

                <div class="metric-badge" style="background: #dc3545;">Type: Ensemble</div>
                <div class="metric-badge" style="background: #28a745;">Best For: Maximum Accuracy</div>
            </div>

            <div class="note">
                <h4>📊 Similarity Measure Comparison</h4>
                <div class="performance-chart">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span><strong>Cosine Similarity</strong></span>
                        <span>Speed: Fast | Accuracy: High</span>
                    </div>
                    <div class="chart-bar">
                        <div class="bar-fill" style="background: #fd7e14; width: 85%;"></div>
                    </div>

                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span><strong>Jaccard Similarity</strong></span>
                        <span>Speed: Very Fast | Accuracy: Good</span>
                    </div>
                    <div class="chart-bar">
                        <div class="bar-fill" style="background: #17a2b8; width: 75%;"></div>
                    </div>

                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span><strong>Manhattan Similarity</strong></span>
                        <span>Speed: Fast | Accuracy: Medium</span>
                    </div>
                    <div class="chart-bar">
                        <div class="bar-fill" style="background: #6f42c1; width: 65%;"></div>
                    </div>

                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span><strong>Hybrid Similarity</strong></span>
                        <span>Speed: Medium | Accuracy: Excellent</span>
                    </div>
                    <div class="chart-bar">
                        <div class="bar-fill" style="background: #dc3545; width: 95%;"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="multilayer" class="section">
            <h2>🏗️ Multi-Layer Clustering Approach</h2>
            
            <p>GitCury employs a sophisticated multi-layer clustering strategy that progressively refines file groupings using different algorithms and similarity measures.</p>
            
            <div class="visual-diagram">
                <h3>🎯 Layer Hierarchy Flow</h3>
                <div class="flowchart-container">
                    <div class="flowchart-step">
                        <div class="step-icon">📁</div>
                        <div class="step-content">
                            <h4>Layer 1: Directory</h4>
                            <p>Initial structure-based grouping</p>
                        </div>
                    </div>
                    <div class="flowchart-arrow">↓</div>
                    <div class="flowchart-step">
                        <div class="step-icon">🔍</div>
                        <div class="step-content">
                            <h4>Layer 2: Pattern</h4>
                            <p>Naming pattern recognition</p>
                        </div>
                    </div>
                    <div class="flowchart-arrow">↓</div>
                    <div class="flowchart-step">
                        <div class="step-icon">🧠</div>
                        <div class="step-content">
                            <h4>Layer 3: Semantic</h4>
                            <p>AI-powered content analysis</p>
                        </div>
                    </div>
                    <div class="flowchart-arrow">↓</div>
                    <div class="flowchart-step">
                        <div class="step-icon">🌳</div>
                        <div class="step-content">
                            <h4>Layer 4: Hierarchical</h4>
                            <p>Tree-like relationship mapping</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="visual-diagram">
                <h3>⚡ Fallback Mechanism</h3>
                <div class="fallback-flow">
                    <div class="fallback-step primary">
                        <h4>🎯 Primary Strategy</h4>
                        <p>Semantic Clustering with AI embeddings</p>
                        <span class="accuracy-badge high">95% accuracy</span>
                    </div>
                    <div class="fallback-arrow">
                        <span>If fails or unavailable</span>
                        ↓
                    </div>
                    <div class="fallback-step secondary">
                        <h4>🔄 Secondary Strategy</h4>
                        <p>Pattern + Directory Clustering</p>
                        <span class="accuracy-badge medium">85% accuracy</span>
                    </div>
                    <div class="fallback-arrow">
                        <span>If still fails</span>
                        ↓
                    </div>
                    <div class="fallback-step tertiary">
                        <h4>🛡️ Fallback Strategy</h4>
                        <p>Basic Directory Clustering only</p>
                        <span class="accuracy-badge low">70% accuracy</span>
                    </div>
                </div>
            </div>

            <div class="note">
                <h4>🎯 Clustering Mode Selection</h4>
                <div class="clustering-modes">
                    <div class="mode-card">
                        <div class="mode-icon">🎯</div>
                        <h5>Target-Based Mode</h5>
                        <p>Fixed number of clusters requested</p>
                        <div class="mode-features">
                            <span class="feature">🔢 Specific cluster count</span>
                            <span class="feature">⚖️ Balanced distribution</span>
                        </div>
                    </div>
                    <div class="mode-card">
                        <div class="mode-icon">📊</div>
                        <h5>Threshold-Based Mode</h5>
                        <p>Natural grouping based on similarity</p>
                        <div class="mode-features">
                            <span class="feature">🔄 Dynamic cluster count</span>
                            <span class="feature">📏 Similarity thresholds</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="visual-diagram">
                <h3>📊 Performance vs Quality Matrix</h3>
                <div class="performance-matrix">
                    <div class="matrix-row">
                        <div class="matrix-label">🏃‍♂️ Speed</div>
                        <div class="matrix-cell high">📁 Directory</div>
                        <div class="matrix-cell high">🔍 Pattern</div>
                        <div class="matrix-cell medium">💾 Cached</div>
                        <div class="matrix-cell low">🧠 Semantic</div>
                    </div>
                    <div class="matrix-row">
                        <div class="matrix-label">🎯 Quality</div>
                        <div class="matrix-cell medium">📁 Directory</div>
                        <div class="matrix-cell medium">🔍 Pattern</div>
                        <div class="matrix-cell high">💾 Cached</div>
                        <div class="matrix-cell high">🧠 Semantic</div>
                    </div>
                    <div class="matrix-row">
                        <div class="matrix-label">⚡ Reliability</div>
                        <div class="matrix-cell high">📁 Directory</div>
                        <div class="matrix-cell high">🔍 Pattern</div>
                        <div class="matrix-cell medium">💾 Cached</div>
                        <div class="matrix-cell medium">🧠 Semantic</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="performance" class="section">
            <h2>⚡ Performance & Optimization</h2>

            <div class="visual-diagram">
                <h3>🚀 Caching System Architecture</h3>
                <div class="cache-flow">
                    <div class="cache-step">
                        <div class="cache-icon">📥</div>
                        <h4>Request</h4>
                        <p>Embedding request arrives</p>
                    </div>
                    <div class="flowchart-arrow">→</div>
                    <div class="cache-step decision">
                        <div class="cache-icon">🔍</div>
                        <h4>Cache Check</h4>
                        <p>Look for existing embedding</p>
                    </div>
                    <div class="cache-branches">
                        <div class="cache-branch hit">
                            <div class="flowchart-arrow">↗️</div>
                            <div class="cache-step success">
                                <div class="cache-icon">✅</div>
                                <h4>Cache Hit</h4>
                                <p>Return cached result</p>
                                <span class="performance-badge fast">~1ms</span>
                            </div>
                        </div>
                        <div class="cache-branch miss">
                            <div class="flowchart-arrow">↘️</div>
                            <div class="cache-step process">
                                <div class="cache-icon">🔄</div>
                                <h4>Cache Miss</h4>
                                <p>Generate new embedding</p>
                                <span class="performance-badge slow">~500ms</span>
                            </div>
                            <div class="flowchart-arrow">↓</div>
                            <div class="cache-step store">
                                <div class="cache-icon">💾</div>
                                <h4>Store Result</h4>
                                <p>Cache for future use</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="visual-diagram">
                <h3>📊 Cache Performance Metrics</h3>
                <div class="metrics-dashboard">
                    <div class="metric-card">
                        <div class="metric-icon">🎯</div>
                        <div class="metric-value">85%</div>
                        <div class="metric-label">Hit Ratio</div>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: 85%; background: #28a745;"></div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">⚡</div>
                        <div class="metric-value">1.2ms</div>
                        <div class="metric-label">Avg Hit Time</div>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: 95%; background: #20c997;"></div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">💾</div>
                        <div class="metric-value">120MB</div>
                        <div class="metric-label">Cache Size</div>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: 60%; background: #fd7e14;"></div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">🔄</div>
                        <div class="metric-value">45</div>
                        <div class="metric-label">Evicted Entries</div>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: 30%; background: #6c757d;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="visual-diagram">
                <h3>🎛️ Rate Limiting & Concurrency Control</h3>
                <div class="rate-limit-flow">
                    <div class="rate-limit-step">
                        <h4>🚦 Request Queue</h4>
                        <div class="queue-visualization">
                            <div class="queue-item active">Req 1</div>
                            <div class="queue-item waiting">Req 2</div>
                            <div class="queue-item waiting">Req 3</div>
                            <div class="queue-item waiting">Req 4</div>
                        </div>
                        <p>Max 3 concurrent requests</p>
                    </div>
                    <div class="rate-limit-step">
                        <h4>⏱️ Delay Management</h4>
                        <div class="delay-visualization">
                            <div class="delay-bar">
                                <span>100ms</span>
                                <div class="delay-fill" style="width: 20%;"></div>
                            </div>
                            <div class="delay-bar">
                                <span>250ms</span>
                                <div class="delay-fill" style="width: 50%;"></div>
                            </div>
                            <div class="delay-bar">
                                <span>500ms</span>
                                <div class="delay-fill" style="width: 100%;"></div>
                            </div>
                        </div>
                        <p>Adaptive delay based on load</p>
                    </div>
                </div>
            </div>

            <div class="visual-diagram">
                <h3>🎯 Smart Sampling Strategy</h3>
                <div class="sampling-flow">
                    <div class="sampling-step">
                        <div class="step-icon">📁</div>
                        <h4>Large File Set</h4>
                        <p>100+ files detected</p>
                        <div class="file-grid">
                            <div class="file-item">f1</div>
                            <div class="file-item">f2</div>
                            <div class="file-item">f3</div>
                            <div class="file-item">...</div>
                            <div class="file-item">f100</div>
                        </div>
                    </div>
                    <div class="flowchart-arrow">↓</div>
                    <div class="sampling-step">
                        <div class="step-icon">🎯</div>
                        <h4>Representative Selection</h4>
                        <p>Choose diverse samples</p>
                        <div class="sample-categories">
                            <div class="sample-cat">📄 .go files</div>
                            <div class="sample-cat">🎨 .css files</div>
                            <div class="sample-cat">📝 .md files</div>
                            <div class="sample-cat">⚙️ config files</div>
                        </div>
                    </div>
                    <div class="flowchart-arrow">↓</div>
                    <div class="sampling-step">
                        <div class="step-icon">🧠</div>
                        <h4>Cluster Representatives</h4>
                        <p>High-quality clustering on samples</p>
                        <div class="performance-badge fast">90% faster</div>
                    </div>
                    <div class="flowchart-arrow">↓</div>
                    <div class="sampling-step">
                        <div class="step-icon">📎</div>
                        <h4>Assign Remaining</h4>
                        <p>Map other files to clusters</p>
                        <div class="performance-badge quality">95% accuracy maintained</div>
                    </div>
                </div>
            </div>

            <div class="note">
                <h4>🏆 Performance Optimization Features</h4>
                <div class="optimization-grid">
                    <div class="optimization-card">
                        <div class="opt-icon">🗂️</div>
                        <h5>LRU Eviction</h5>
                        <p>Intelligent cache management removes least recently used embeddings</p>
                    </div>
                    <div class="optimization-card">
                        <div class="opt-icon">⏰</div>
                        <h5>TTL Management</h5>
                        <p>Time-based expiration ensures fresh embeddings for changed files</p>
                    </div>
                    <div class="optimization-card">
                        <div class="opt-icon">📏</div>
                        <h5>Adaptive Diff Size</h5>
                        <p>File-type specific diff sizes optimize API usage and accuracy</p>
                    </div>
                    <div class="optimization-card">
                        <div class="opt-icon">🔄</div>
                        <h5>Background Cleanup</h5>
                        <p>Automatic cache maintenance keeps system running smoothly</p>
                    </div>
                </div>
            </div>
        </section>
        </section>

        <section id="evaluation" class="section">
            <h2>📊 Evaluation Metrics</h2>

            <div class="visual-diagram">
                <h3>🎯 Silhouette Score Analysis</h3>
                <div class="metric-explanation">
                    <div class="formula-box">
                        <h4>📐 Formula</h4>
                        <div class="formula">s(i) = (b(i) - a(i)) / max(a(i), b(i))</div>
                        <p>Where:</p>
                        <ul>
                            <li><strong>a(i):</strong> Average distance to same cluster points</li>
                            <li><strong>b(i):</strong> Minimum average distance to other clusters</li>
                        </ul>
                    </div>
                    
                    <div class="silhouette-visualization">
                        <h4>📊 Score Interpretation</h4>
                        <div class="score-range excellent">
                            <div class="score-label">Perfect Clustering</div>
                            <div class="score-value">1.0</div>
                            <div class="score-bar" style="background: #28a745; width: 100%;"></div>
                        </div>
                        <div class="score-range good">
                            <div class="score-label">Good Clustering</div>
                            <div class="score-value">0.5+</div>
                            <div class="score-bar" style="background: #20c997; width: 75%;"></div>
                        </div>
                        <div class="score-range neutral">
                            <div class="score-label">Overlapping Clusters</div>
                            <div class="score-value">0.0</div>
                            <div class="score-bar" style="background: #ffc107; width: 50%;"></div>
                        </div>
                        <div class="score-range poor">
                            <div class="score-label">Poor Clustering</div>
                            <div class="score-value">Negative</div>
                            <div class="score-bar" style="background: #dc3545; width: 25%;"></div>
                        </div>
                    </div>
                </div>

                <div class="algorithm-flow">
                    <h4>🔄 Calculation Process</h4>
                    <div class="process-step">
                        <div class="step-icon">📊</div>
                        <div class="step-content">
                            <h5>1. Data Point Analysis</h5>
                            <p>For each point, calculate distances to all other points</p>
                        </div>
                    </div>
                    <div class="flowchart-arrow">↓</div>
                    <div class="process-step">
                        <div class="step-icon">🎯</div>
                        <div class="step-content">
                            <h5>2. Same Cluster Distance</h5>
                            <p>Average distance to points in same cluster (a)</p>
                        </div>
                    </div>
                    <div class="flowchart-arrow">↓</div>
                    <div class="process-step">
                        <div class="step-icon">🔍</div>
                        <div class="step-content">
                            <h5>3. Other Cluster Distance</h5>
                            <p>Minimum average distance to other clusters (b)</p>
                        </div>
                    </div>
                    <div class="flowchart-arrow">↓</div>
                    <div class="process-step">
                        <div class="step-icon">📐</div>
                        <div class="step-content">
                            <h5>4. Score Calculation</h5>
                            <p>Apply formula and average across all points</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="visual-diagram">
                <h3>📏 Inertia (WCSS) Measurement</h3>
                <div class="inertia-explanation">
                    <div class="concept-box">
                        <h4>🎯 Within-Cluster Sum of Squares</h4>
                        <p>Measures how tightly points are clustered within each cluster</p>
                        <div class="inertia-formula">
                            <strong>Lower inertia = Tighter clusters</strong>
                        </div>
                    </div>
                    
                    <div class="inertia-visualization">
                        <div class="cluster-visual">
                            <div class="cluster-group tight">
                                <div class="cluster-center">C1</div>
                                <div class="cluster-points">
                                    <div class="point"></div>
                                    <div class="point"></div>
                                    <div class="point"></div>
                                </div>
                                <div class="inertia-score low">Low Inertia ✅</div>
                            </div>
                            <div class="cluster-group loose">
                                <div class="cluster-center">C2</div>
                                <div class="cluster-points scattered">
                                    <div class="point"></div>
                                    <div class="point"></div>
                                    <div class="point"></div>
                                </div>
                                <div class="inertia-score high">High Inertia ❌</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="calculation-flow">
                    <h4>⚙️ Calculation Steps</h4>
                    <div class="calc-step">
                        <div class="step-number">1</div>
                        <div class="step-desc">Calculate centroid for each cluster</div>
                    </div>
                    <div class="calc-step">
                        <div class="step-number">2</div>
                        <div class="step-desc">Measure squared distance from each point to its centroid</div>
                    </div>
                    <div class="calc-step">
                        <div class="step-number">3</div>
                        <div class="step-desc">Sum all squared distances across all clusters</div>
                    </div>
                </div>
            </div>

            <div class="visual-diagram">
                <h3>🏆 Confidence Metrics Dashboard</h3>
                <div class="confidence-dashboard">
                    <div class="confidence-metric">
                        <div class="metric-icon">📁</div>
                        <h4>Directory Confidence</h4>
                        <p>How well clusters respect directory structure</p>
                        <div class="confidence-bar">
                            <div class="confidence-fill" style="width: 85%; background: #28a745;"></div>
                            <span class="confidence-value">85%</span>
                        </div>
                    </div>
                    
                    <div class="confidence-metric">
                        <div class="metric-icon">🎨</div>
                        <h4>Pattern Confidence</h4>
                        <p>Extension and naming pattern coherence</p>
                        <div class="confidence-bar">
                            <div class="confidence-fill" style="width: 78%; background: #20c997;"></div>
                            <span class="confidence-value">78%</span>
                        </div>
                    </div>
                    
                    <div class="confidence-metric">
                        <div class="metric-icon">⚖️</div>
                        <h4>Size Confidence</h4>
                        <p>Balanced cluster size distribution</p>
                        <div class="confidence-bar">
                            <div class="confidence-fill" style="width: 92%; background: #17a2b8;"></div>
                            <span class="confidence-value">92%</span>
                        </div>
                    </div>
                    
                    <div class="confidence-metric">
                        <div class="metric-icon">📊</div>
                        <h4>Coverage Confidence</h4>
                        <p>Percentage of files successfully clustered</p>
                        <div class="confidence-bar">
                            <div class="confidence-fill" style="width: 96%; background: #fd7e14;"></div>
                            <span class="confidence-value">96%</span>
                        </div>
                    </div>
                </div>

                <div class="overall-confidence">
                    <h4>🎯 Overall Clustering Confidence</h4>
                    <div class="overall-score">
                        <div class="score-circle">
                            <div class="score-value">87.8%</div>
                            <div class="score-label">Weighted Average</div>
                        </div>
                        <div class="weight-breakdown">
                            <div class="weight-item">
                                <span>Directory:</span>
                                <span>30% weight</span>
                            </div>
                            <div class="weight-item">
                                <span>Pattern:</span>
                                <span>30% weight</span>
                            </div>
                            <div class="weight-item">
                                <span>Size:</span>
                                <span>20% weight</span>
                            </div>
                            <div class="weight-item">
                                <span>Coverage:</span>
                                <span>20% weight</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="configuration" class="section">
            <h2>⚙️ Configuration & Tuning</h2>

            <div class="visual-diagram">
                <h3>🎛️ Configuration Architecture</h3>
                <div class="config-structure">
                    <div class="config-group main">
                        <h4>🏗️ Main Configuration</h4>
                        <div class="config-items">
                            <div class="config-item">
                                <span class="config-key">defaultMethod</span>
                                <span class="config-type">string</span>
                            </div>
                            <div class="config-item">
                                <span class="config-key">enableFallbackMethods</span>
                                <span class="config-type">boolean</span>
                            </div>
                            <div class="config-item">
                                <span class="config-key">maxFilesForSemanticClustering</span>
                                <span class="config-type">integer</span>
                            </div>
                        </div>
                    </div>

                    <div class="config-group methods">
                        <h4>🔧 Method Configuration</h4>
                        <div class="method-configs">
                            <div class="method-config">
                                <div class="method-icon">📁</div>
                                <h5>Directory</h5>
                                <div class="method-settings">
                                    <span>Enabled: ✅</span>
                                    <span>Weight: 1.0</span>
                                </div>
                            </div>
                            <div class="method-config">
                                <div class="method-icon">🎨</div>
                                <h5>Pattern</h5>
                                <div class="method-settings">
                                    <span>Enabled: ✅</span>
                                    <span>Weight: 0.8</span>
                                </div>
                            </div>
                            <div class="method-config">
                                <div class="method-icon">💾</div>
                                <h5>Cached</h5>
                                <div class="method-settings">
                                    <span>Enabled: ✅</span>
                                    <span>Weight: 0.9</span>
                                </div>
                            </div>
                            <div class="method-config">
                                <div class="method-icon">🧠</div>
                                <h5>Semantic</h5>
                                <div class="method-settings">
                                    <span>Enabled: ✅</span>
                                    <span>Rate Limit: 100ms</span>
                                    <span>Max Concurrent: 3</span>
                                    <span>Timeout: 30s</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="config-group performance">
                        <h4>⚡ Performance Settings</h4>
                        <div class="performance-toggles">
                            <div class="toggle-item">
                                <span>🏃‍♂️ Prefer Speed</span>
                                <div class="toggle-switch active"></div>
                            </div>
                            <div class="toggle-item">
                                <span>⏱️ Max Processing Time</span>
                                <span class="toggle-value">60s</span>
                            </div>
                            <div class="toggle-item">
                                <span>📊 Enable Benchmarking</span>
                                <div class="toggle-switch active"></div>
                            </div>
                            <div class="toggle-item">
                                <span>🔧 Adaptive Optimization</span>
                                <div class="toggle-switch active"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="visual-diagram">
                <h3>🎯 Optimization Presets</h3>
                <div class="preset-comparison">
                    <div class="preset-card speed">
                        <div class="preset-header">
                            <div class="preset-icon">🏃‍♂️</div>
                            <h4>Speed-Optimized</h4>
                        </div>
                        <div class="preset-settings">
                            <div class="setting">
                                <span>Default Method:</span>
                                <span class="value">Directory</span>
                            </div>
                            <div class="setting">
                                <span>Fallback Methods:</span>
                                <span class="value disabled">Disabled</span>
                            </div>
                            <div class="setting">
                                <span>Semantic Clustering:</span>
                                <span class="value disabled">Disabled</span>
                            </div>
                            <div class="setting">
                                <span>Max Processing Time:</span>
                                <span class="value">30s</span>
                            </div>
                        </div>
                        <div class="preset-metrics">
                            <div class="metric">
                                <span>⚡ Speed:</span>
                                <span class="metric-bar speed-high"></span>
                            </div>
                            <div class="metric">
                                <span>🎯 Quality:</span>
                                <span class="metric-bar quality-medium"></span>
                            </div>
                        </div>
                        <div class="use-case">💼 Fast processing with basic clustering quality</div>
                    </div>

                    <div class="preset-card quality">
                        <div class="preset-header">
                            <div class="preset-icon">🏆</div>
                            <h4>Quality-Optimized</h4>
                        </div>
                        <div class="preset-settings">
                            <div class="setting">
                                <span>Default Method:</span>
                                <span class="value">Semantic</span>
                            </div>
                            <div class="setting">
                                <span>Fallback Methods:</span>
                                <span class="value enabled">Enabled</span>
                            </div>
                            <div class="setting">
                                <span>Max Files (Semantic):</span>
                                <span class="value">20</span>
                            </div>
                            <div class="setting">
                                <span>Max Processing Time:</span>
                                <span class="value">120s</span>
                            </div>
                        </div>
                        <div class="preset-metrics">
                            <div class="metric">
                                <span>⚡ Speed:</span>
                                <span class="metric-bar speed-medium"></span>
                            </div>
                            <div class="metric">
                                <span>🎯 Quality:</span>
                                <span class="metric-bar quality-high"></span>
                            </div>
                        </div>
                        <div class="use-case">🎯 Maximum clustering quality with longer processing time</div>
                    </div>
                </div>
            </div>

            <div class="visual-diagram">
                <h3>🎚️ Threshold Tuning Guide</h3>
                <div class="threshold-table">
                    <div class="table-header">
                        <div class="header-cell">Method</div>
                        <div class="header-cell">Confidence Threshold</div>
                        <div class="header-cell">Similarity Threshold</div>
                        <div class="header-cell">Recommended Range</div>
                    </div>
                    
                    <div class="table-row">
                        <div class="method-cell">
                            <div class="method-icon">📁</div>
                            <span>Directory</span>
                        </div>
                        <div class="threshold-cell">
                            <div class="threshold-bar">
                                <div class="threshold-fill" style="width: 80%; background: #28a745;"></div>
                                <span>0.8</span>
                            </div>
                        </div>
                        <div class="threshold-cell">
                            <div class="threshold-bar">
                                <div class="threshold-fill" style="width: 70%; background: #17a2b8;"></div>
                                <span>0.7</span>
                            </div>
                        </div>
                        <div class="range-cell">0.6 - 0.9</div>
                    </div>
                    
                    <div class="table-row">
                        <div class="method-cell">
                            <div class="method-icon">🎨</div>
                            <span>Pattern</span>
                        </div>
                        <div class="threshold-cell">
                            <div class="threshold-bar">
                                <div class="threshold-fill" style="width: 70%; background: #28a745;"></div>
                                <span>0.7</span>
                            </div>
                        </div>
                        <div class="threshold-cell">
                            <div class="threshold-bar">
                                <div class="threshold-fill" style="width: 60%; background: #17a2b8;"></div>
                                <span>0.6</span>
                            </div>
                        </div>
                        <div class="range-cell">0.5 - 0.8</div>
                    </div>
                    
                    <div class="table-row">
                        <div class="method-cell">
                            <div class="method-icon">💾</div>
                            <span>Cached</span>
                        </div>
                        <div class="threshold-cell">
                            <div class="threshold-bar">
                                <div class="threshold-fill" style="width: 60%; background: #28a745;"></div>
                                <span>0.6</span>
                            </div>
                        </div>
                        <div class="threshold-cell">
                            <div class="threshold-bar">
                                <div class="threshold-fill" style="width: 50%; background: #17a2b8;"></div>
                                <span>0.5</span>
                            </div>
                        </div>
                        <div class="range-cell">0.4 - 0.7</div>
                    </div>
                    
                    <div class="table-row">
                        <div class="method-cell">
                            <div class="method-icon">🧠</div>
                            <span>Semantic</span>
                        </div>
                        <div class="threshold-cell">
                            <div class="threshold-bar">
                                <div class="threshold-fill" style="width: 50%; background: #28a745;"></div>
                                <span>0.5</span>
                            </div>
                        </div>
                        <div class="threshold-cell">
                            <div class="threshold-bar">
                                <div class="threshold-fill" style="width: 40%; background: #17a2b8;"></div>
                                <span>0.4</span>
                            </div>
                        </div>
                        <div class="range-cell">0.3 - 0.6</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="implementation" class="section">
            <h2>🛠️ Implementation Details</h2>

            <div class="visual-diagram">
                <h3>🏗️ Key Data Structures</h3>
                <div class="data-structures">
                    <div class="structure-card">
                        <div class="structure-header">
                            <div class="structure-icon">📂</div>
                            <h4>FileCluster</h4>
                        </div>
                        <div class="structure-fields">
                            <div class="field">
                                <span class="field-name">Files</span>
                                <span class="field-type">[]string</span>
                                <span class="field-desc">List of file paths in cluster</span>
                            </div>
                            <div class="field">
                                <span class="field-name">Similarity</span>
                                <span class="field-type">float64</span>
                                <span class="field-desc">Cluster cohesion score</span>
                            </div>
                            <div class="field">
                                <span class="field-name">ClusterType</span>
                                <span class="field-type">string</span>
                                <span class="field-desc">Algorithm used for clustering</span>
                            </div>
                            <div class="field">
                                <span class="field-name">Created</span>
                                <span class="field-type">time.Time</span>
                                <span class="field-desc">Timestamp of creation</span>
                            </div>
                        </div>
                    </div>

                    <div class="structure-card">
                        <div class="structure-header">
                            <div class="structure-icon">💾</div>
                            <h4>FileCacheEntry</h4>
                        </div>
                        <div class="structure-fields">
                            <div class="field">
                                <span class="field-name">FilePath</span>
                                <span class="field-type">string</span>
                                <span class="field-desc">Absolute path to file</span>
                            </div>
                            <div class="field">
                                <span class="field-name">Embedding</span>
                                <span class="field-type">[]float32</span>
                                <span class="field-desc">Vector representation</span>
                            </div>
                            <div class="field">
                                <span class="field-name">ContentHash</span>
                                <span class="field-type">string</span>
                                <span class="field-desc">Hash for cache validation</span>
                            </div>
                            <div class="field">
                                <span class="field-name">LastUpdated</span>
                                <span class="field-type">time.Time</span>
                                <span class="field-desc">Cache entry timestamp</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="visual-diagram">
                <h3>🧠 Adaptive Algorithm Selection</h3>
                <div class="algorithm-selection-flow">
                    <div class="selection-start">
                        <div class="step-icon">📊</div>
                        <h4>Data Analysis</h4>
                        <p>Analyze dataset characteristics</p>
                    </div>
                    
                    <div class="flowchart-arrow">↓</div>
                    
                    <div class="decision-diamond">
                        <div class="decision-text">Dataset Size < 10?</div>
                    </div>
                    
                    <div class="decision-branches">
                        <div class="branch-left">
                            <div class="flowchart-arrow">Yes →</div>
                            <div class="algorithm-choice">
                                <div class="algo-icon">🌳</div>
                                <h5>Hierarchical</h5>
                                <p>Better for small datasets</p>
                                <span class="complexity-badge low">O(n³)</span>
                            </div>
                        </div>
                        
                        <div class="branch-right">
                            <div class="flowchart-arrow">No →</div>
                            <div class="variance-check">
                                <div class="decision-diamond small">
                                    <div class="decision-text">Variance < 0.1?</div>
                                </div>
                                
                                <div class="variance-branches">
                                    <div class="variance-branch">
                                        <div class="flowchart-arrow">Yes →</div>
                                        <div class="algorithm-choice">
                                            <div class="algo-icon">🌳</div>
                                            <h5>Hierarchical</h5>
                                            <p>Low variance data</p>
                                            <span class="threshold-badge">threshold: 0.3</span>
                                        </div>
                                    </div>
                                    <div class="variance-branch">
                                        <div class="flowchart-arrow">No →</div>
                                        <div class="algorithm-choice">
                                            <div class="algo-icon">🎯</div>
                                            <h5>K-Means</h5>
                                            <p>High variance data</p>
                                            <span class="optimization-badge">Global optimization</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="visual-diagram">
                <h3>🛡️ Error Handling & Resilience</h3>
                <div class="resilience-architecture">
                    <div class="resilience-layer">
                        <h4>🔧 Error Detection</h4>
                        <div class="error-types">
                            <div class="error-card api">
                                <div class="error-icon">🌐</div>
                                <h5>API Failures</h5>
                                <p>Network timeouts, rate limits, service unavailable</p>
                                <div class="error-response">→ Fallback to cached clustering</div>
                            </div>
                            <div class="error-card data">
                                <div class="error-icon">📊</div>
                                <h5>Invalid Embeddings</h5>
                                <p>Corrupted data, invalid vectors, dimension mismatch</p>
                                <div class="error-response">→ Skip problematic files, continue</div>
                            </div>
                            <div class="error-card timeout">
                                <div class="error-icon">⏰</div>
                                <h5>Timeout Protection</h5>
                                <p>Long-running operations, resource exhaustion</p>
                                <div class="error-response">→ Graceful degradation</div>
                            </div>
                            <div class="error-card memory">
                                <div class="error-icon">💾</div>
                                <h5>Memory Management</h5>
                                <p>Cache overflow, memory leaks, resource limits</p>
                                <div class="error-response">→ LRU cleanup and size limits</div>
                            </div>
                        </div>
                    </div>

                    <div class="fallback-cascade">
                        <h4>⚡ Fallback Cascade</h4>
                        <div class="cascade-flow">
                            <div class="cascade-step primary">
                                <div class="step-number">1</div>
                                <h5>Semantic Clustering</h5>
                                <p>AI-powered analysis</p>
                                <span class="status-badge success">Primary</span>
                            </div>
                            <div class="cascade-arrow">
                                <span>If fails</span>
                                ↓
                            </div>
                            <div class="cascade-step secondary">
                                <div class="step-number">2</div>
                                <h5>Pattern Clustering</h5>
                                <p>File extension & naming patterns</p>
                                <span class="status-badge warning">Fallback</span>
                            </div>
                            <div class="cascade-arrow">
                                <span>If fails</span>
                                ↓
                            </div>
                            <div class="cascade-step tertiary">
                                <div class="step-number">3</div>
                                <h5>Directory Clustering</h5>
                                <p>Basic folder structure</p>
                                <span class="status-badge safe">Safe fallback</span>
                            </div>
                            <div class="cascade-arrow">
                                <span>If fails</span>
                                ↓
                            </div>
                            <div class="cascade-step final">
                                <div class="step-number">4</div>
                                <h5>Single File Clusters</h5>
                                <p>One file per cluster</p>
                                <span class="status-badge guaranteed">Always works</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="visual-diagram">
                <h3>💡 Best Practices Guide</h3>
                <div class="best-practices">
                    <div class="practice-category">
                        <div class="category-icon">🚀</div>
                        <h4>Getting Started</h4>
                        <div class="practice-items">
                            <div class="practice-item">
                                <div class="practice-icon">📁</div>
                                <div class="practice-content">
                                    <h5>Start Simple</h5>
                                    <p>Begin with directory-based clustering for reliable results</p>
                                </div>
                            </div>
                            <div class="practice-item">
                                <div class="practice-icon">📊</div>
                                <div class="practice-content">
                                    <h5>Monitor Performance</h5>
                                    <p>Use benchmarking to track clustering quality over time</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="practice-category">
                        <div class="category-icon">⚡</div>
                        <h4>Optimization</h4>
                        <div class="practice-items">
                            <div class="practice-item">
                                <div class="practice-icon">💾</div>
                                <div class="practice-content">
                                    <h5>Cache Aggressively</h5>
                                    <p>Embedding generation is expensive - cache everything</p>
                                </div>
                            </div>
                            <div class="practice-item">
                                <div class="practice-icon">🎯</div>
                                <div class="practice-content">
                                    <h5>Validate Results</h5>
                                    <p>Always check confidence scores before accepting clustering results</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="practice-category">
                        <div class="category-icon">🎛️</div>
                        <h4>Fine-Tuning</h4>
                        <div class="practice-items">
                            <div class="practice-item">
                                <div class="practice-icon">🎚️</div>
                                <div class="practice-content">
                                    <h5>Tune Thresholds</h5>
                                    <p>Adjust thresholds based on your specific use case and data</p>
                                </div>
                            </div>
                            <div class="practice-item">
                                <div class="practice-icon">🔄</div>
                                <div class="practice-content">
                                    <h5>Test Iteratively</h5>
                                    <p>Experiment with different configurations to find optimal settings</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="pro-tip">
                    <div class="tip-icon">💡</div>
                    <div class="tip-content">
                        <h4>Pro Tip</h4>
                        <p>The multi-layer approach ensures that you always get reasonable clustering results, even when advanced methods fail. The system gracefully degrades while maintaining functionality.</p>
                    </div>
                </div>
            </div>
        </section>
    
    inertia := 0.0
    for i, point := range data {
        clusterLabel := labels[i]
        centroid := centroids[clusterLabel]
        
        // Calculate squared distance to centroid
        squaredDist := 0.0
        for j := 0; j < len(point); j++ {
            diff := float64(point[j]) - float64(centroid[j])
            squaredDist += diff * diff
        }
        
        inertia += squaredDist
    }
    
    return inertia
}
                </div>

                <div class="highlight">
                    Lower inertia indicates tighter, more cohesive clusters. Used in conjunction with silhouette score for comprehensive quality assessment.
                </div>
            </div>

            <h3>Confidence Metrics</h3>
            <div class="implementation-card">
                <h4>Multi-Dimensional Confidence Assessment</h4>
                
                <div class="code-block">
func calculateOverallClusteringConfidence(clusters [][]string, allFiles []string, rootFolder string) float64 {
    // Calculate multiple confidence metrics
    dirConfidence := calculateDirectoryGroupingConfidence(allFiles, clusters, rootFolder)
    patternConfidence := calculatePatternConfidence(allFiles, clusters)
    
    // Size distribution confidence
    sizeVariance := calculateClusterSizeVariance(clusters)
    sizeConfidence := math.Max(0, 1.0-sizeVariance)
    
    // Coverage confidence
    totalClustered := 0
    for _, cluster := range clusters {
        totalClustered += len(cluster)
    }
    coverageConfidence := float64(totalClustered) / float64(len(allFiles))
    
    // Weighted average
    weights := []float64{0.3, 0.3, 0.2, 0.2}
    scores := []float64{dirConfidence, patternConfidence, sizeConfidence, coverageConfidence}
    
    return calculateWeightedAverage(scores, weights)
}
                </div>

                <p><strong>Confidence Components:</strong></p>
                <ul>
                    <li><strong>Directory Confidence:</strong> How well clusters respect directory structure</li>
                    <li><strong>Pattern Confidence:</strong> Extension and naming pattern coherence</li>
                    <li><strong>Size Confidence:</strong> Balanced cluster size distribution</li>
                    <li><strong>Coverage Confidence:</strong> Percentage of files successfully clustered</li>
                </ul>
            </div>
        </section>

        <section id="configuration" class="section">
            <h2>7. Configuration & Tuning</h2>

            <h3>Clustering Configuration Structure</h3>
            <div class="implementation-card">
                <h4>Comprehensive Configuration System</h4>
                
                <div class="code-block">
type ClusteringConfig struct {
    DefaultMethod                   string                    `json:"defaultMethod"`
    EnableFallbackMethods          bool                      `json:"enableFallbackMethods"`
    MaxFilesForSemanticClustering  int                       `json:"maxFilesForSemanticClustering"`
    ConfidenceThresholds           map[string]float64        `json:"confidenceThresholds"`
    SimilarityThresholds           map[string]float64        `json:"similarityThresholds"`
    Methods                        ClusteringMethods         `json:"methods"`
    Performance                    PerformanceConfig         `json:"performance"`
}

type ClusteringMethods struct {
    Directory DirectoryConfig `json:"directory"`
    Pattern   PatternConfig   `json:"pattern"`
    Cached    CachedConfig    `json:"cached"`
    Semantic  SemanticConfig  `json:"semantic"`
}
                </div>
            </div>

            <h3>Method-Specific Configuration</h3>
            
            <h4>Directory Method</h4>
            <div class="code-block">
type DirectoryConfig struct {
    Enabled bool    `json:"enabled"`
    Weight  float64 `json:"weight"`
}
            </div>

            <h4>Semantic Method</h4>
            <div class="code-block">
type SemanticConfig struct {
    Enabled                 bool    `json:"enabled"`
    Weight                  float64 `json:"weight"`
    RateLimitDelay          int     `json:"rateLimitDelay"`          // milliseconds
    MaxConcurrentEmbeddings int     `json:"maxConcurrentEmbeddings"`
    EmbeddingTimeout        int     `json:"embeddingTimeout"`        // seconds
}
            </div>

            <h4>Performance Configuration</h4>
            <div class="code-block">
type PerformanceConfig struct {
    PreferSpeed           bool `json:"preferSpeed"`
    MaxProcessingTime     int  `json:"maxProcessingTime"`     // seconds
    EnableBenchmarking    bool `json:"enableBenchmarking"`
    AdaptiveOptimization  bool `json:"adaptiveOptimization"`
}
            </div>

            <h3>Optimization Presets</h3>
            
            <div class="algorithm-card">
                <h4>Speed-Optimized Configuration</h4>
                <div class="code-block">
func GetSpeedOptimizedConfig() *ClusteringConfig {
    config := getDefaultClusteringConfig()
    config.DefaultMethod = "directory"
    config.EnableFallbackMethods = false
    config.Methods.Semantic.Enabled = false
    config.Methods.Cached.Enabled = false
    config.Performance.PreferSpeed = true
    config.Performance.MaxProcessingTime = 30
    return config
}
                </div>
                <p><strong>Use Case:</strong> Fast processing with basic clustering quality</p>
            </div>

            <div class="algorithm-card">
                <h4>Quality-Optimized Configuration</h4>
                <div class="code-block">
func GetQualityOptimizedConfig() *ClusteringConfig {
    config := getDefaultClusteringConfig()
    config.DefaultMethod = "semantic"
    config.EnableFallbackMethods = true
    config.MaxFilesForSemanticClustering = 20
    
    // Lower thresholds for more permissive clustering
    config.ConfidenceThresholds["semantic"] = 0.6
    config.Methods.Semantic.Weight = 1.0
    config.Performance.PreferSpeed = false
    config.Performance.MaxProcessingTime = 120
    return config
}
                </div>
                <p><strong>Use Case:</strong> Maximum clustering quality with longer processing time</p>
            </div>

            <h3>Threshold Tuning Guidelines</h3>
            <table>
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Confidence Threshold</th>
                        <th>Similarity Threshold</th>
                        <th>Recommended Range</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Directory</td>
                        <td>0.8</td>
                        <td>0.7</td>
                        <td>0.6 - 0.9</td>
                    </tr>
                    <tr>
                        <td>Pattern</td>
                        <td>0.7</td>
                        <td>0.6</td>
                        <td>0.5 - 0.8</td>
                    </tr>
                    <tr>
                        <td>Cached</td>
                        <td>0.6</td>
                        <td>0.5</td>
                        <td>0.4 - 0.7</td>
                    </tr>
                    <tr>
                        <td>Semantic</td>
                        <td>0.5</td>
                        <td>0.4</td>
                        <td>0.3 - 0.6</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="implementation" class="section">
            <h2>8. Implementation Details</h2>

            <h3>Key Data Structures</h3>
            
            <h4>File Cluster</h4>
            <div class="code-block">
type FileCluster struct {
    Files       []string  `json:"files"`
    Similarity  float64   `json:"similarity"`
    ClusterType string    `json:"clusterType"`
    Created     time.Time `json:"created"`
}
            </div>

            <h4>Embedding Cache Entry</h4>
            <div class="code-block">
type FileCacheEntry struct {
    FilePath    string    `json:"filePath"`
    Embedding   []float32 `json:"embedding"`
    ContentHash string    `json:"contentHash"`
    LastUpdated time.Time `json:"lastUpdated"`
}
            </div>

            <h3>Algorithm Selection Logic</h3>
            <div class="implementation-card">
                <h4>Adaptive Clustering Selection</h4>
                
                <div class="code-block">
func AdaptiveClustering(data [][]float32, targetClusters int, maxIter int) ([]int, error) {
    if len(data) < 10 {
        // For small datasets, use hierarchical clustering
        return HierarchicalClustering(data, targetClusters, 0.5)
    }

    // Calculate data variance to determine clustering approach
    variance := calculateDataVariance(data)

    if variance < 0.1 {
        // Low variance: use hierarchical for better local structure
        return HierarchicalClustering(data, targetClusters, 0.3)
    } else {
        // High variance: use K-means for global optimization
        return KMeansOptimized(data, targetClusters, maxIter)
    }
}
                </div>
            </div>

            <h3>Error Handling & Resilience</h3>
            <div class="implementation-card">
                <h4>Robust Fallback Mechanisms</h4>
                
                <ul>
                    <li><strong>API Failures:</strong> Automatic fallback to cached or pattern-based clustering</li>
                    <li><strong>Invalid Embeddings:</strong> Skip problematic files and continue with valid data</li>
                    <li><strong>Timeout Protection:</strong> Configurable timeouts with graceful degradation</li>
                    <li><strong>Memory Management:</strong> LRU cache with size limits and cleanup</li>
                </ul>
                
                <div class="code-block">
func handleClusteringError(err error, files []string, method string) ([][]string, error) {
    utils.Warning(fmt.Sprintf("[GIT.CLUSTER]: %s clustering failed: %v, falling back", method, err))
    
    switch method {
    case "semantic":
        return patternBasedClustering(files, -1)
    case "cached":
        return directoryBasedClustering(files, "", -1)
    default:
        return createSingleFileClusters(files), nil
    }
}
                </div>
            </div>

            <h3>Best Practices</h3>
            <div class="highlight">
                <h4>Implementation Guidelines</h4>
                <ul>
                    <li><strong>Start Simple:</strong> Begin with directory-based clustering for reliable results</li>
                    <li><strong>Monitor Performance:</strong> Use benchmarking to track clustering quality over time</li>
                    <li><strong>Cache Aggressively:</strong> Embedding generation is expensive - cache everything</li>
                    <li><strong>Validate Results:</strong> Always check confidence scores before accepting clustering results</li>
                    <li><strong>Tune Thresholds:</strong> Adjust thresholds based on your specific use case and data</li>
                </ul>
            </div>

            <div class="note">
                <strong>Pro Tip:</strong> The multi-layer approach ensures that you always get reasonable clustering results, even when advanced methods fail. The system gracefully degrades while maintaining functionality.
            </div>
        </section>

        <div class="section" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-align: center;">
            <h2 style="color: white; border-bottom: 2px solid rgba(255,255,255,0.3);">Conclusion</h2>
            <p style="font-size: 1.1em; margin: 20px 0;">
                GitCury's clustering system represents a sophisticated approach to intelligent file grouping, combining multiple algorithms with smart fallback mechanisms and comprehensive performance optimization. The multi-layer architecture ensures reliable results while the advanced similarity measures provide high-quality clustering for modern development workflows.
            </p>
            <p style="font-style: italic; opacity: 0.9;">
                This implementation serves as a comprehensive reference for advanced clustering techniques in software development tools.
            </p>
        </div>
    </div>
</body>
</html>
